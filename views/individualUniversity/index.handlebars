<h2><span>{{pageTitle}}</span></h2>

<section>
    {{#if universityData}}
        <div>
            <img src="{{universityData.universityPhoto}}" alt="{{universityData.name}}">
        </div>
        <div>
            <p>{{universityList.name}}</p>
        </div>
        <div>
            <p>CITY: {{universityData.city}}</p>
            <p>STATE: {{universityData.state}}</p>
        </div>
        <div>
            <h5>US Rank: {{universityData.rank}}</h5>
        </div>
        <div>
            <h5>About University:</h5>
            <p>{{universityData.description}}</p>
        </div>
        {{!-- Add to favourite --}}
        {{#if userId }}
            {{#listChecker universityData.favoriteUniversityList universityData.name}}
                <form id = "unfavouriteForm" action="/university/unfavourite" method="post">
                    <input name='uniId' value = {{universityData._id}} hidden>
                    <button name="Unfavourite" value="Unfavourite">Unfavourite</button>
                </form>
            {{else}}
                <form id = "favouriteForm" action="/university/favourite" method="post">
                    <input name='uniId' value = {{universityData._id}} hidden>
                    <input id = "favouriteUniversitiesLength" name="favouriteUniversitiesLength" value = {{universityData.favoriteUniversityList.length}} hidden>
                    <button name="Favourite" value="Favourite">Add to Favourites</button>
                </form>
            {{/listChecker}}
        {{/if}}
        {{#unless userId}}
            <form id = "favouriteForm" action="/university/favourite" method="post">
                <input name='uniId' value = {{universityData._id}} hidden>
                <input id = "favouriteUniversitiesLength" name="favouriteUniversitiesLength" value = {{universityData.favoriteUniversityList.length}} hidden>
                <button name="Favourite" value="Favourite">Add to Favourites</button>
            </form>
        {{/unless}}
        <div>
            <p><h5>Rating - </h5>{{universityData.totalRating}}</p>
        </div>
        <div>
            <p>Real time status of users that have rated until now: {{universityData.rating.length}}</p>
        </div>
        {{!-- To give rating remaining --}}
        {{#if userId}}
            {{#if userRating}}
                <div>
                    <p>You have rated: {{userRating}}</p>
                </div>
                <form id="ratingForm" action="/university/editRating" method="post">
                    <label for="rating">Change rating:</label>
                    <select id="rating" name="rating">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                    <input name='uniId' value = {{universityData._id}} hidden>
                    <input type="submit" value="Rate" class="btn-grad">
                </form>
            {{/if}}
            {{#unless userRating}}
            <form id="ratingForm" action="/university/editRating" method="post">
                <label for="rating">Give a rating:</label>
                <select id="rating" name="rating">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
                <input name='uniId' value = {{universityData._id}} hidden>
                <input type="submit" value="Rate" class="btn-grad">
            </form>
            {{/unless}}
        {{/if}}
        {{#unless userId}}
        <form id="ratingForm" action="/university/editRating" method="post">
                <label for="rating">Give a rating:</label>
                <select id="rating" name="rating">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
                <input name='uniId' value = {{universityData._id}} hidden>
                <input type="submit" value="Rate" class="btn-grad">
            </form>
        {{/unless}}

        {{!-- Form to create a new comment --}}
        <div>
            <form id="commentOnUniversity" action="/university/comment" method="post">
                <input
                    id="newComment"
                    name="newComment"
                    type="text"
                    placeholder="Post a review or comment on this University..."
                    required="required"
                    autocomplete="off"
                />
                <input name='uniId' value = {{universityData._id}} hidden>
                <input type="submit" value="Submit" class="btn-grad" />
            </form>
        </div>
        {{!-- To display comments --}}
        {{#if universityData.comments}}
            {{#each universityData.comments}}
                <div>
                    <p>{{this.userName}}</p>
                    {{#userChecker ../userId this.userId}}
                        <form id = "commentDeleteForm" action="/university/deleteComment" method="post">
                            <input name='commentId' value = {{this._id}} hidden>
                            <input name='uniId' value = {{../universityData._id}} hidden>
                            <button name="deleteComment" value="deleteComment">Delete</button>
                        </form>
                    {{/userChecker}}
                    <p>{{this.text}}</p>
                </div>
            {{/each}}
        {{/if}}
        {{#unless universityData.comments}}
            No Comments yet!
        {{/unless}}
    {{/if}}
    <script src="/public/js/individualUniversity/individualUniversity.js"></script>
</section>